<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="generator" content="Hugo 0.41" />
    <meta name="description" content="">


    <link rel="shortcut icon" href="/Docs/images/favicon.png" type="image/x-icon" />
<link rel="icon" href="/Docs/images/favicon.png" type="image/x-icon" />
    <title>Raspberry Pi Toy Car :: Horned Sungem Documentation</title>
    
    
    <link href="/Docs/css/nucleus.css?1531215145" rel="stylesheet">
    <link href="/Docs/css/font-awesome.min.css?1531215145" rel="stylesheet">
    <link href="/Docs/css/hybrid.css?1531215145" rel="stylesheet">
    <link href="/Docs/css/featherlight.min.css?1531215145" rel="stylesheet">
    <link href="/Docs/css/perfect-scrollbar.min.css?1531215145" rel="stylesheet">
    <link href="/Docs/css/auto-complete.css?1531215145" rel="stylesheet">
    <link href="/Docs/css/theme.css?1531215145" rel="stylesheet">
    <link href="/Docs/css/hugo-theme.css?1531215145" rel="stylesheet">
    
      <link href="/Docs/css/theme-mine.css?1531215145" rel="stylesheet">
    

    <script src="/Docs/js/jquery-2.x.min.js?1531215145"></script>
    
    <style type="text/css">
      :root #header + #content > #left > #rlblock_left{ 
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/Docs/workflow/raspi_car/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <div>
	<a href="/Docs/" ><img align="left" src="/Docs/logo.png"></a>
</div>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fa fa-search"></i></label>
    <input data-search-input id="search-by" type="text" placeholder="Search...">
    <span data-search-clear=""><i class="fa fa-close"></i></span>
</div>

<script type="text/javascript" src="/Docs/js/lunr.min.js?1531215145"></script>
<script type="text/javascript" src="/Docs/js/auto-complete.js?1531215145"></script>
<script type="text/javascript">
    
        var baseurl = "\/Docs";
    
</script>
<script type="text/javascript" src="/Docs/js/search.js?1531215145"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/Docs/installation/" title="Installation Guide" class="dd-item 
        
        
        
        ">
      <a href="/Docs/installation/">
          Installation Guide
          
      </a>
      
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/Docs/quickstart/" title="Quick Start" class="dd-item 
        
        
        
        ">
      <a href="/Docs/quickstart/">
          Quick Start
          
      </a>
      
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/Docs/model/" title="Model List" class="dd-item 
        
        
        
        ">
      <a href="/Docs/model/">
          Model List
          
      </a>
      
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/Docs/workflow/" title="Examples and Tutorials" class="dd-item 
        parent
        
        
        ">
      <a href="/Docs/workflow/">
          Examples and Tutorials
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/Docs/workflow/detector/" title="Face detector" class="dd-item ">
        <a href="/Docs/workflow/detector/">
        Face detector
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/Docs/workflow/detector_object/" title="Object Detector" class="dd-item ">
        <a href="/Docs/workflow/detector_object/">
        Object Detector
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/Docs/workflow/recorder/" title="Scene Recorder" class="dd-item ">
        <a href="/Docs/workflow/recorder/">
        Scene Recorder
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/Docs/workflow/face_recognition/" title="Face recorder (Working with two HS devices)" class="dd-item ">
        <a href="/Docs/workflow/face_recognition/">
        Face recorder (Working with two HS devices)
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/Docs/workflow/image_recognition/" title="Image Recogniser (Low-level API Tutorial)" class="dd-item ">
        <a href="/Docs/workflow/image_recognition/">
        Image Recogniser (Low-level API Tutorial)
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/Docs/workflow/rapiro/" title="Rapiro Robot" class="dd-item ">
        <a href="/Docs/workflow/rapiro/">
        Rapiro Robot
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/Docs/workflow/smartlamp/" title="Smart Lamp" class="dd-item ">
        <a href="/Docs/workflow/smartlamp/">
        Smart Lamp
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/Docs/workflow/sitting_pose/" title="Sitting posture alarm" class="dd-item ">
        <a href="/Docs/workflow/sitting_pose/">
        Sitting posture alarm
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/Docs/workflow/raspi_car/" title="Raspberry Pi Toy Car" class="dd-item active">
        <a href="/Docs/workflow/raspi_car/">
        Raspberry Pi Toy Car
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/Docs/workflow/android/" title="Android" class="dd-item 
        
        
        
        ">
      <a href="/Docs/workflow/android/">
          Android
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/Docs/workflow/android/android_hello2018/" title="Hello 2018" class="dd-item ">
        <a href="/Docs/workflow/android/android_hello2018/">
        Hello 2018
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/Docs/workflow/android/android_face_detector/" title="人脸检测" class="dd-item ">
        <a href="/Docs/workflow/android/android_face_detector/">
        人脸检测
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/Docs/workflow/android/android_object_detector/" title="物体检测" class="dd-item ">
        <a href="/Docs/workflow/android/android_object_detector/">
        物体检测
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/Docs/workflow/android/android_sketchguess/" title="手绘识别" class="dd-item ">
        <a href="/Docs/workflow/android/android_sketchguess/">
        手绘识别
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/Docs/workflow/ocr/" title="" class="dd-item ">
        <a href="/Docs/workflow/ocr/">
        
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/Docs/api/" title="HS-API" class="dd-item 
        
        
        
        ">
      <a href="/Docs/api/">
          HS-API
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/Docs/api/lowlevel/" title="底层API (英文）" class="dd-item ">
        <a href="/Docs/api/lowlevel/">
        底层API (英文）
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/Docs/api/highlevel/" title="High-level API" class="dd-item ">
        <a href="/Docs/api/highlevel/">
        High-level API
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/Docs/api/android/" title="Android Java API" class="dd-item ">
        <a href="/Docs/api/android/">
        Android Java API
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/Docs/contact/" title="Contact us" class="dd-item 
        
        
        
        ">
      <a href="/Docs/contact/">
          Contact us
          
      </a>
      
              
    </li>
  
 

          
         
    </ul>

    
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
        <li>
          <a class="padding">
            <i class="fa fa-fw fa-language"></i>
          <div class="select-style">
            <select id="select-language" onchange="location = this.value;">
          
          
          
              
              
                  
                    
                    
                      <option id="en" value="/Docs/workflow/raspi_car/" selected>English</option>
                    
                  
              
                  
              
          
              
              
                  
              
                  
                    
                    
                      <option id="cn" value="/Docs/cn/workflow/raspi_car/">Chinese</option>
                    
                  
              
          
        </select>
        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          width="255px" height="255px" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255;" xml:space="preserve">
          <g>
            <g id="arrow-drop-down">
              <polygon points="0,63.75 127.5,191.25 255,63.75 		" />
            </g>
          </g>
        </svg>
        </div>
        </a>
        </li>
       
      
      
      </ul>
    </section>
    
    <section id="footer">
      <a class="github-button" href="https://github.com/HornedSungem/SungemSDK" data-icon="octicon-cloud-download" aria-label="Download Horned Sungem SDK on GitHub">Github Link</a>

    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fa fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
                  
                  <span class="links">
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/Docs/'>Horned Sungem Documentation</a> > <a href='/Docs/workflow/'>Examples and Tutorials</a> > Raspberry Pi Toy Car
          
         
          
         
          
           
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#workflow">Workflow</a></li>
<li><a href="#implementation">Implementation</a></li>
<li><a href="#outcome">Outcome</a></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            

        
        <div id="body-inner">
          
            <h1>Raspberry Pi Toy Car</h1>
          

        




<p>We bring a HS enhanced Raspberry Pi Toy car by using object detector.</p>

<blockquote>
<p>Hardware list:</p>

<ul>
<li>HS device</li>
<li>Raspberry Pi 3b</li>
<li>Assembled Raspberry Pi toy car with SCM controlled motors</li>
</ul>
</blockquote>

<h2 id="workflow">Workflow</h2>

<p><img src="/Docs/media/15263802272033/1-1.jpg" alt="1-1" /></p>

<p>The built-in model Mobilenet-SSD object detector is used in this DIY demo. The logic is illustrated as below:</p>

<p><img src="/Docs/media/15263802272033/1-2.jpg" alt="1-2" /></p>

<h2 id="implementation">Implementation</h2>

<p>Firstly we assemble the toy car, the car is not necessary to be the same as ours, it should work as long as it is controlled through GPIO pin. Then we install <code>SungemSDK</code> to the Raspberry Pi and remotely test and debug through a Python IDE. We recommend <code>pycharm</code>.</p>

<p>Please note that due to the low stability of Raspberry Pi USB power transfer (max 600mA), it might be sometimes insufficient to power the HS device or other external devices. However, it&rsquo;s possible to use an extra cable for power.</p>

<p><img src="/Docs/media/15263802272033/2-1.jpg" alt="2-2" /></p>

<p>python code for controlling the car:</p>

<pre><code class="language-python">#!/usr/bin/env python3
# coding=utf-8

from SungemSDK.api import hsapi as hs
import drive
from video import VideoProcessor


def process(ret):
    bicycles = [x for x in ret[1] if x[0] in {1}]  # 1 bicycle
    if len(bicycles) &gt; 0:  # when bicycle detected
        bike = bicycles[0]
        x_mid = (bike[2] + bike[4]) / 2 / ret[0].shape[1]
        if x_mid &lt; 0.4:  # target LHS
            return drive.Direction.left
        elif x_mid &gt; 0.6:  # target RHS
            return drive.Direction.right
        else:  # front
            return drive.Direction.up
    else:
        return drive.Direction.stop


if __name__ == '__main__':
    t_driver = drive.DriveThread()  # a thread for driving car
    t_video = VideoProcessor((&quot;192.168.50.201&quot;, 10700))  # socket thread for transferring video frames

    try:
        net = hs.HS('ObjectDetector', zoom=True, verbose=0, threshSSD=0.2,
                    graphFolder=&quot;../../SungemSDK/examples/graphs/&quot;)
        t_driver.start()
        t_video.start()

        while True:
            result = net.run()  # return result from HS device
            t_driver.direction = process(result)
            image = net.plotSSD(result)
            if t_video.has_client():
                t_video.input_queue.put(image) 
    finally:
        drive.cleanup()
</code></pre>

<h2 id="outcome">Outcome</h2>

<p><img src="/Docs/media/15263802272033/3-1.jpg" alt="3-1" /></p>

<p>When target object (bicycle) is detected, the car will run toward to the object.
<img src="/Docs/media/15263802272033/3-2.gif" alt="3-2" /></p>


<footer class=" footline" >
	
</footer>


        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


        
            <a class="nav nav-prev" href="/Docs/workflow/sitting_pose/" title="Sitting posture alarm"> <i class="fa fa-chevron-left"></i></a>
        
        
            <a class="nav nav-next" href="/Docs/workflow/android/" title="Android" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
        
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/Docs/js/clipboard.min.js?1531215145"></script>
    <script src="/Docs/js/perfect-scrollbar.min.js?1531215145"></script>
    <script src="/Docs/js/perfect-scrollbar.jquery.min.js?1531215145"></script>
    <script src="/Docs/js/jquery.sticky.js?1531215145"></script>
    <script src="/Docs/js/featherlight.min.js?1531215145"></script>
    <script src="/Docs/js/html5shiv-printshiv.min.js?1531215145"></script>
    <script src="/Docs/js/highlight.pack.js?1531215145"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/Docs/js/modernizr.custom.71422.js?1531215145"></script>
    <script src="/Docs/js/learn.js?1531215145"></script>
    <script src="/Docs/js/hugo-learn.js?1531215145"></script>

    <link href="/Docs/mermaid/mermaid.css?1531215145" type="text/css" rel="stylesheet" />
    <script src="/Docs/mermaid/mermaid.js?1531215145"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>

